{% extends 'base.html.twig' %}

{% block title %}Modifier la maison{% endblock %}

{% block body %}
<div class="site-mobile-menu site-navbar-target">
		<div class="site-mobile-menu-header">
			<div class="site-mobile-menu-close">
				<span class="icofont-close js-menu-toggle"></span>
			</div>
		</div>
		<div class="site-mobile-menu-body"></div>
	</div>

	<div class="hero hero-inner">
		<div class="container">
			<div class="row align-items-center">
				<div class="col-lg-6 mx-auto text-center">
					<div class="intro-wrap">
						<h1 class="mb-0">Editer logement</h1>
					</div>
				</div>
			</div>
		</div>
	</div>

   

    <form action="{{ path('app_proprio_edit', {'id': house.id}) }}" method="post" enctype="multipart/form-data">
       {{ form_start(form) }} 

   
    <div class="form-group">
                    <p class="mt-3"><strong style="color: black;">Localisation : </strong></p>
                    {{ form_widget(form.title, {'attr': {'class': 'form-control', 'placeholder': 'Paris,
                    Seine-Saint-Denis, France'}}) }}
    </div>
    <div class="form-group">
                    <p class="mt-3"><strong style="color: black;">Localisation : </strong></p>
                    {{ form_widget(form.latitude, {'attr': {'class': 'form-control', 'placeholder':
                     'Paris, Seine-Saint-Denis, France'}}) }}
    </div>
    <div class="form-group">
                    <p class="mt-3"><strong style="color: black;">Localisation : </strong></p>
                    {{ form_widget(form.longitude, {'attr': {'class': 'form-control', 'placeholder': 'Paris,
                    Seine-Saint-Denis, France'}}) }}
    </div>
    <div class="form-group">
                    <p class="mt-3"><strong style="color: black;">Localisation : </strong></p>
                    {{ form_widget(form.address, {'attr': {'class': 'form-control', 'placeholder': 'Paris,
                    Seine-Saint-Denis, France'}}) }}
    </div>
    <div class="form-group">
                    <p class="mt-3"><strong style="color: black;">Localisation : </strong></p>
                    {{ form_widget(form.capacity, {'attr': {'class': 'form-control', 'placeholder': 'Paris,
                    Seine-Saint-Denis, France'}}) }}
    </div>
    <div class="form-group">
                    <p class="mt-3"><strong style="color: black;">Localisation : </strong></p>
                    {{ form_widget(form.num_rooms, {'attr': {'class': 'form-control', 'placeholder': 'Paris,
                    Seine-Saint-Denis, France'}}) }}
    </div>
    <div class="form-group">
                    <p class="mt-3"><strong style="color: black;">Localisation : </strong></p>
                    {{ form_widget(form.num_bedrooms, {'attr': {'class': 'form-control', 'placeholder': 'Paris,
                    Seine-Saint-Denis, France'}}) }}
    </div>
    <div class="form-group">
                    <p class="mt-3"><strong style="color: black;">Localisation : </strong></p>
                    {{ form_widget(form.num_bathrooms, {'attr': {'class': 'form-control', 'placeholder': 'Paris,
                    Seine-Saint-Denis, France'}}) }}
    </div>
    <div class="form-group">
                    <p class="mt-3"><strong style="color: black;">Localisation : </strong></p>
                    {{ form_widget(form.daily_price, {'attr': {'class': 'form-control', 'placeholder': 'Paris,
                    Seine-Saint-Denis, France'}}) }}
    </div>
    <div class="form-group">
                    <p class="mt-3"><strong style="color: black;">Localisation : </strong></p>
                    {{ form_widget(form.description, {'attr': {'class': 'form-control', 'placeholder': 'Paris,
                    Seine-Saint-Denis, France'}}) }}
    </div>
    <div class="form-group">
                    <p class="mt-3"><strong style="color: black;">Localisation : </strong></p>
                    {{ form_widget(form.category, {'attr': {'class': 'form-control', 'placeholder': 'Paris,
                    Seine-Saint-Denis, France'}}) }}
    </div>
    <div class="form-group">
                    <p class="mt-3"><strong style="color: black;">Localisation : </strong></p>
                    {{ form_widget(form.actif, {'attr': {'class': 'form-control', 'placeholder': 'Paris,
                    Seine-Saint-Denis, France'}}) }}
    </div>
    <div class="form-group">
            <p class="mt-4"><strong style="color: black;">Images</strong></p>
            {{ form_widget(form.images, {'attr': {'onchange': 'showImagePreview(this,
            "selected-image-preview")'}}) }}
            <div id="selected-image-preview" style="max-width: 200px; max-height: 200px; display: none;">
            </div>

   


    {# <a href="{{ path('app_facility_new', {'id': house.id}) }}">Ajouter des équipements</a> #}

    <button type="submit" class="btn btn-primary">Update</button>
    
    {{ form_end(form) }}
    </form>
   
    
   
    

 
{% if house.images|default(false) %}
    <div class="existing-images">
        <h3>Images Existantes</h3>
        <div class="row">
            {% for image in house.images %}
                <div class="col-md-4 mb-2">
                    <img src="{{ asset('img/' ~ image.getFile()) }}" alt="Image " style="max-width: 250px; max-height: 200px; min-width: 250px; min-height: 200px;">
                    <form action="/delete-image" method="post"> <!-- Remplacer "/delete-image" par votre URL de suppression -->
                        <input type="hidden" name="image_id" value="{{ image.getId() }}"> <!-- Assurez-vous que le nom et la valeur correspondent à votre modèle de données -->
                        <button type="submit" class="btn btn-danger mt-2">Supprimer</button>
                    </form>
                </div>
            {% endfor %}
        </div>
    </div>
{% endif %}

<form action="{{ path('app_logement_delete', {'id': house.id}) }}" method="post"
        onsubmit="return confirm('Are you sure you want to delete this item?');">
         <button type="submit" class="btn btn-warning">Supprimer le produit</button>
        <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ house.id) }}"
    </form>

<a href="{{ path('app_proprio_index') }}" class="btn btn-secondary ml-2">Back to List</a>
<script>
    function showImagePreview(input, imagePreviewId) {
        const files = input.files;
        const imagePreview = document.getElementById(imagePreviewId);

        if (files && files.length > 0) {
            imagePreview.innerHTML = '';

            for (let i = 0; i < files.length; i++) {
                const file = files[i];
                const objectUrl = URL.createObjectURL(file);

                const img = document.createElement('img');
                img.src = objectUrl;
                img.alt = "Aperçu de l'image sélectionnée";
                img.style.maxWidth = '200px';
                img.style.minWidth = '200px';
                img.style.maxHeight = '200px';
                img.style.minHeight = '200px';
                img.style.marginRight = '5px';
                img.style.objectFit = 'cover';

                imagePreview.appendChild(img);
            }

            imagePreview.style.display = 'flex';
        } else {
            imagePreview.style.display = 'none';
        }
    }
</script>


    {# <div class="container">
        <div class="row justify-content-center">
            <div class="col-md-8">
                <div class="card">
                    <div class="card-header">Modifier la maison</div>

                    <div class="card-body">
                        {{ include('proprietaire/_form.html.twig', {'button_label': 'Mettre à jour'}) }}
                    </div>
                </div>

                <div class="mt-3">
                    <a href="{{ path('app_proprio_index') }}" class="btn btn-secondary mr-2">Retour à la liste</a>
                  
                    <a href="{{ path('app_facility_new', {'id': house.id}) }}">Create new</a> 
                        
                </div>
            </div>
        </div>
    </div> #}

{% endblock %}
